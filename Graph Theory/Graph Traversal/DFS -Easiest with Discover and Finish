#include<bits/stdc++.h>
#define ll long long
#define pb push_back
using namespace std;

vector<int>graph[1000];
vector<bool>visited(1000,0);
int discover[1000] , finish[1000] , timer = 1 ;


void dfs ( int n){
    if( visited[n] ) return ;
    visited[n] = true ;
    discover[n] = timer ;
    cout<<n<<" D_timer "<<timer<<endl;
    timer+=1;
    for(auto a : graph[n] ){
        if(!visited[a])
            dfs(a);
    }
   finish[n] = timer;
   cout<<n<<" F_timer "<<timer<<endl;
   timer+=1;
}



int main(){
    int node , edge , x , y ;
    cin>>node>>edge;
    for(int i = 1 ; i<= edge ; i+=1){
        cin>>x>>y;
        graph[x].pb(y);
        graph[y].pb(x);
    }
    for(int i = 0 ; i<node  ; i++){
        cout<<i<<" --> ";
        for(auto a : graph[i])
            cout<<a<<" ";cout<<endl;
    }

    for(int i = 0 ; i<node ; i+=1)
        dfs(i);

    for (int i = 0 ; i<node  ; i+=1){
       cout<<discover[i]<<" ";
    }  cout<<endl;
     for (int i = 0 ; i<node  ; i+=1){
       cout<<finish[i]<<" ";
      // cout<<visited[i]<<" ";
    } cout<<endl;

return 0;
}
/*
9 10
0 1
0 8
0 3
1 7
2 7
2 3
3 4
4 8
2 5
5 6
*/
